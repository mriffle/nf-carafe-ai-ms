===================================
Output & Results
===================================

Command Line Output
===================
When running the workflow you should see output similar to:

.. code-block:: console

    N E X T F L O W   ~  version 24.04.4
    Launching `https://github.com/mriffle/nf-carafe-ai-ms` [berserk_banach] DSL2 - revision: 5f76d10037 [main]
    executor >  local (3)
    [skipped  ] get_mzmls:MSCONVERT (1)                  | 1 of 1, stored: 1 ✔
    [f0/98faae] diann_search:DIANN_SEARCH_LIB_FREE       | 1 of 1 ✔
    [ea/71d9ac] carafe:CARAFE                            | 1 of 1 ✔
    [d1/8607a5] save_run_details:WRITE_VERSION_INFO      | 1 of 1 ✔

    Completed at: 11-Sep-2024 12:28:28
    Duration    : 5m 40s
    CPU hours   : 0.7
    Succeeded   : 3

The first line shows the version of Nextflow you are running. The second line shows the version of the workflow
you are running. The third line shows the executor you are using. An executor in Nextflow describes the actual
system the steps of the workflow are running on. 
The next several lines show the actual steps of the workflow as they are running. If a particular step is run
multiple times (e.g., converting many RAW files to mzML using msconvert), the percent complete shows the
percentage of the RAW files that have been converted. The final four lines appear when the workflow completes,
showing the completion time, how long it took, and the number
of steps that succeeded.

Workflow Log
============
The log file called ``.nextflow.log`` will appear in the directory in which the workflow was run. It can be helpful
for determining the cause of any problems. A log file will also be generated for each task executed by the workflow,
which will be described below.

Output Files
============
The results will be placed in a subdirectory called ``results/nf-carafe-ai-ms``.

In this directory is ``nextflow_run_details.txt``, which contains the versions of the programs run, the
specific Docker images used, and information related to Nextflow, itself.

Further subdirectories are created for each program that runs as part of the workflow:

``panorama`` Subdirectory
^^^^^^^^^^^^^^^^^^^^^^^^^
This directory contains logs for file transfers from PanoramaWeb. There will be a ``*.stderr`` and ``*.stdout`` for
each file that was transferred. Any errors encountered transferring that file will be present in the ``stderr`` file.
And the command line output of the transfer program can be found in the ``stdout`` file.

``diann`` Subdirectory
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
This directory contains files output by running DIA-NN.

- ``<raw file base name>.quant`` - Identifications and quantitative information output by DIA-NN in binary format.
- ``diann.stdout`` - The command line output of DIA-NN.
- ``diann.stderr`` - Any error output generated by DIA-NN.
- ``diann_version.txt`` - Contains the version of DIA-NN used.
- ``lib.predicted.speclib`` - The spectral library created by DIA-NN when run in library-free mode (can be used for subsequent analysis).
- ``report.tsv`` - Tab delimited matrix of all precursor ions identified, along with different kinds of quantities, quality metrics and annotations.
- ``report.tsv.speclib`` - The same data as ``report.tsv`` in speclib (DIA-NN spectral library) format.

``carafe`` Subdirectory
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
This directory contains files output by running Carafe

- ``carafe.stdout`` - The command line output of Carafe.
- ``carafe.stderr`` - Any error output generated by Carafe.
- ``carafe_version.txt`` - Contains the version of Carafe used.
- ``carafe_spectral_library.tsv`` - The spectral library created by Carafe in DIA-NN format.
- ``carafe_spectral_library.dlib`` - The spectral library created by Carafe in EncyclopeDIA format.
- ``encyclopedia-convert-tsv.stdout`` - If EncyclopeDIA is the requested output format, this is the console output of the conversion to a DLIB file.
- ``encyclopedia-convert-tsv.stderr`` - If EncyclopeDIA is the requested output format, this is the error output (if any) of the conversion to a DLIB file.
